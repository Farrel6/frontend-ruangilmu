<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Overpass' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Nunito' rel='stylesheet'>
    <link rel="icon" href="aset/logo ruangilmu.svg" type="image/svg+xml" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="style/login.css">
    <style>
        [x-cloak] {
            display: none !important;
        }
    </style>
    <title>RuangIlmu - Register</title>
</head>

<body>
    <div class="flex lg:flex-row w-full h-max">
        <div
            class="flex flex-col h-max my-20 lg:mx-25 mx-5 lg:w-1/2 w-full lg:space-y-6 space-y-2 justify-center lg:items-start items-center tracking-widest">
            <div class="flex">
                <h1 class="font-[Overpass] font-extrabold text-[#444b59] lg:text-3xl text-xl">WELCOME!</h1>
            </div>
            <div class="flex pb-5">
                <h2 class="font-[Nunito] lg:text-xl text-md text-[#444b59]">Already have an account? <a
                        href="login.html" class="text-[#026078] font-bold hover:underline">Sign In</a></h2>
            </div>
            <div class="flex flex-col space-y-3 lg:space-y-6 w-5/6">
                <div class="form">
                    <form action="" class="space-y-3 lg:space-y-6" id="registerForm">
                        <div class="space-y-1 lg:space-y-2">
                            <h3 class="font-[Nunito] text-[#444b59] lg:text-2xl text-lg">Full Name</h3>
                            <input id="fullName" type="text" placeholder="Your full name"
                                class="border-2 border-[#026078] rounded-md font-[Nunito] text-[#444b59] lg:text-xl text-md placeholder:text-[#026078] placeholder:opacity-50 w-full lg:py-3 py-1 lg:px-4 px-2">
                        </div>
                        <div class="space-y-1 lg:space-y-2">
                            <h3 class="font-[Nunito] text-[#444b59] lg:text-2xl text-lg">Email</h3>
                            <input id="email" type="email" placeholder="you@example.com"
                                class="border-2 border-[#026078] rounded-md font-[Nunito] text-[#444b59] lg:text-xl text-md placeholder:text-[#026078] placeholder:opacity-50 w-full lg:py-3 py-1 lg:px-4 px-2">
                        </div>
                        <div class="space-y-1 lg:space-y-2 relative">
                            <h3 class="font-[Nunito] text-[#444b59] lg:text-2xl text-lg">Password</h3>
                            <input id="password" type="password" placeholder="6 characters or more"
                                class="border-2 border-[#026078] rounded-md font-[Nunito] text-[#444b59] lg:text-xl text-md placeholder:text-[#026078] placeholder:opacity-50 w-full lg:py-3 py-1 lg:px-4 px-2 pr-10">
                            <img src="aset/eye_icon.svg" id="togglePassword" alt="Toggle Password"
                                class="absolute right-3 top-[55%] translate-y-[-50%] w-6 h-6 cursor-pointer opacity-100">
                            <p id="passwordError" class="text-sm text-red-600 font-[Nunito] invisible">Password must be
                                at
                                least 6 characters.</p>
                        </div>
                        <div class="space-y-1 lg:space-y-2 relative">
                            <h3 class="font-[Nunito] text-[#444b59] lg:text-2xl text-lg">Password Confirm</h3>
                            <input id="confirmPassword" type="password" placeholder="6 characters or more"
                                class="border-2 border-[#026078] rounded-md font-[Nunito] text-[#444b59] lg:text-xl text-md placeholder:text-[#026078] placeholder:opacity-50 w-full lg:py-3 py-1 lg:px-4 px-2 pr-10">
                            <img src="aset/eye_icon.svg" id="toggleConfirm" alt="Toggle Confirm Password"
                                class="absolute right-3 top-[55%] translate-y-[-50%] w-6 h-6 cursor-pointer opacity-100">
                            <p id="confirmError" class="text-sm text-red-600 font-[Nunito] invisible">Passwords do not
                                match.</p>
                        </div>
                        <div class="flex lg:flex-row">
                            <input type="checkbox" id="remember"
                                class="font-[Nunito] lg:text-lg text-sm text-[#444b59] checked:bg-[#026078] mr-2">
                            <p class="font-[Nunito] lg:text-lg text-sm text-[#444b59]">Remember me</p>
                        </div>
                        <div class="">
                            <button type="submit" id="registerBtn"
                                class="bg-[#026078] font-[Nunito] rounded-md lg:text-xl text-md text-white font-extrabold inset-shadow-sm inset-shadow-white cursor-pointer hover:bg-[#004b5f] active:bg-[#004455] py-3 px-4 w-full"
                                disabled>Register</button>
                        </div>
                    </form>
                </div>
                <div class="grid grid-cols-3 items-center content-center gap-x-2 w-full">
                    <div class="lg:visible invisible pl-5">
                        <hr class="border-1 border-[#026078]">
                    </div>
                    <div class="flex justify-center">
                        <h4 class="font-[Nunito] text-[#444b59] lg:text-lg text-sm whitespace-nowrap">or continue with
                        </h4>
                    </div>
                    <div class="lg:visible invisible pr-5">
                        <hr class="border-1 border-[#026078]">
                    </div>
                </div>
                <div class="flex flex-row items-center justify-center space-x-6 w-full">
                    <button type="button"
                        class="border-1 border-[#026078] rounded-sm cursor-pointer hover:bg-gray-500/20 lg:py-2 py-1 lg:px-6 px-3 h-full"><img
                            src="aset/google_logo.svg" alt="" class=""></button>
                    <button type="button"
                        class="border-1 border-[#026078] rounded-sm cursor-pointer hover:bg-gray-500/20 lg:py-2 py-1 lg:px-6 px-3 h-full"><img
                            src="aset/facebook_logo.svg" alt=""></button>
                </div>
            </div>
        </div>
        <div class="invisible lg:visible flex justify-end items-end bottom-0 right-0 fixed w-1/2">
            <div>
                <img src="aset/Side Image.svg" alt="" class="w-full">
            </div>
        </div>
    </div>

    <div id="registerSuccessToast"
        class=" fixed top-5 left-1/2 -translate-x-1/2 bg-white border-3 border-[#026078] text-green-500 py-2 px-4 rounded-md shadow-lg"
        x-data="{ show: false }" x-cloak @show-toast-success.window="show = true; setTimeout(() => show = false, 3000)"
        x-transition:enter="transition ease-out duration-300 transform"
        x-transition:enter-start="opacity-0 -translate-y-10" x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-200 transform" x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0" x-show="show">
        Register Successful! Please check your email.
    </div>
    <div id="registerErrorToast"
        class=" fixed top-5 left-1/2 -translate-x-1/2 bg-white border-3 border-[#026078] text-red-500 py-2 px-4 rounded-md shadow-lg"
        x-data="{ show: false }" x-cloak @show-toast-error.window="show = true; setTimeout(() => show = false, 3000)"
        x-transition:enter="transition ease-out duration-300 transform"
        x-transition:enter-start="opacity-0 -translate-y-10" x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-200 transform" x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0" x-show="show">
        Email Already in Use!
    </div>

    <!-- External Script -->
    <script>
        const fullName = document.getElementById("fullName");
        const email = document.getElementById("email");
        const password = document.getElementById("password");
        const confirmPassword = document.getElementById("confirmPassword");
        const registerBtn = document.getElementById("registerBtn");

        const passwordError = document.getElementById("passwordError");
        const confirmError = document.getElementById("confirmError");
        const togglePassword = document.getElementById("togglePassword");
        const toggleConfirm = document.getElementById("toggleConfirm");

        function validateForm() {
            let isValid = true;

            if (password.value.length < 6) {
                passwordError.classList.remove("invisible");
                isValid = false;
            } else {
                passwordError.classList.add("invisible");
            }

            if (confirmPassword.value !== password.value || confirmPassword.value === "") {
                confirmError.classList.remove("invisible");
                isValid = false;
            } else {
                confirmError.classList.add("invisible");
            }

            if (
                fullName.value.trim() === "" ||
                email.value.trim() === "" ||
                password.value === "" ||
                confirmPassword.value === ""
            ) {
                isValid = false;
            }

            registerBtn.disabled = !isValid;
        }

        fullName.addEventListener("input", validateForm);
        email.addEventListener("input", validateForm);
        password.addEventListener("input", () => {
            validateForm();
        });
        confirmPassword.addEventListener("input", () => {
            validateForm();
        });

        togglePassword.addEventListener("click", () => {
            if (password.type === "password") {
                password.type = "text";
                togglePassword.style.opacity = "0.4";
            } else {
                password.type = "password";
                togglePassword.style.opacity = "1";
            }
        });

        toggleConfirm.addEventListener("click", () => {
            if (confirmPassword.type === "password") {
                confirmPassword.type = "text";
                toggleConfirm.style.opacity = "0.4";
            } else {
                confirmPassword.type = "password";
                toggleConfirm.style.opacity = "1";
            }
        });

        const registerForm = document.getElementById("registerForm");
        const registerEmail = document.getElementById("email");
        const registerPassword = document.getElementById("password"); 

        registerForm.addEventListener("submit", (e) => {
            e.preventDefault();

            const emailValue = registerEmail.value.trim();
            const passwordValue = registerPassword.value.trim();

            // Simulasi: email sudah dipakai
            if (emailValue === "dummy@dummy.com") {
                sessionStorage.setItem('registerStatus', 'error');
                setTimeout(() => {
                    window.location.reload();
                }, 100); 
            } else {
                sessionStorage.setItem('registerStatus', 'success');
                setTimeout(() => {
                    window.location.href = "verify.html"; 
                }, 100); 
            }
        });

        document.addEventListener("DOMContentLoaded", () => {
            const status = sessionStorage.getItem('registerStatus');
            const successToast = document.getElementById("registerSuccessToast");
            const errorToast = document.getElementById("registerErrorToast");

            if (status === 'success') {
                window.dispatchEvent(new CustomEvent('show-toast-success'));
                sessionStorage.removeItem('registerStatus');
            } else if (status === 'error') {
                window.dispatchEvent(new CustomEvent('show-toast-error'));
                sessionStorage.removeItem('registerStatus');
            }
        });

    </script>
</body>

</html>