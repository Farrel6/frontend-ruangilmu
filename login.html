<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href='https://fonts.googleapis.com/css?family=Overpass' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Nunito' rel='stylesheet'>
    <link rel="icon" href="aset/logo ruangilmu.svg" type="image/svg+xml" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="style/login.css">
    <title>RuangIlmu - Login</title>
    <style>
        [x-cloak] {
            display: none !important;
        }
    </style>
</head>

<body>
    <div class="flex lg:flex-row w-full h-max">
        <div
            class="flex flex-col h-max my-20 lg:mx-25 mx-5 lg:w-1/2 w-full lg:space-y-6 space-y-2 justify-center lg:items-start items-center tracking-widest">
            <div class="flex">
                <h1 class="font-[Overpass] font-extrabold text-[#444b59] lg:text-3xl text-xl">WELCOME BACK!</h1>
            </div>
            <div class="flex pb-5">
                <h2 class="font-[Nunito] lg:text-xl text-md text-[#444b59]">Don't have an account? <a
                        href="register.html" class="text-[#026078] font-bold hover:underline">Register</a></h2>
            </div>
            <div class="flex flex-col space-y-3 lg:space-y-6 w-5/6">
                <form action="" class="space-y-3 lg:space-y-6" id="loginForm">
                    <div class="space-y-1 lg:space-y-2">
                        <h3 class="font-[Nunito] text-[#444b59] lg:text-2xl text-lg">Email</h3>
                        <input id="loginEmail" type="email" placeholder="you@example.com"
                            class="border-2 border-[#026078] rounded-md font-[Nunito] text-[#444b59] lg:text-xl text-md placeholder:text-[#026078] placeholder:opacity-50 w-full lg:py-3 py-1 lg:px-4 px-2">
                    </div>
                    <div class="space-y-1 lg:space-y-2 relative">
                        <h3 class="font-[Nunito] text-[#444b59] lg:text-2xl text-lg">Password</h3>
                        <input id="loginPassword" type="password" placeholder="6 characters or more"
                            class="border-2 border-[#026078] rounded-md font-[Nunito] text-[#444b59] lg:text-xl text-md placeholder:text-[#026078] placeholder:opacity-50 w-full lg:py-3 py-1 lg:px-4 px-2 pr-10">
                        <img src="aset/eye_icon.svg" id="toggleLoginPassword" alt="Toggle Password"
                            class="absolute right-3 top-[55%] translate-y-[-50%] w-6 h-6 cursor-pointer opacity-100">
                        <p id="loginPasswordError" class="text-sm text-red-600 font-[Nunito] invisible">Password must be
                            at least 6 characters.</p>
                    </div>
                    <div class="flex lg:flex-row">
                        <input type="checkbox" id="remember"
                            class="font-[Nunito] lg:text-lg text-sm text-[#444b59] checked:bg-[#026078] mr-2">
                        <p class="font-[Nunito] lg:text-lg text-sm text-[#444b59]">Remember me</p>
                    </div>
                    <div class="">
                        <button type="submit" id="loginSubmit"
                            class="bg-[#026078] font-[Nunito] rounded-md lg:text-xl text-md text-white font-extrabold inset-shadow-sm inset-shadow-white cursor-pointer hover:bg-[#004b5f] active:bg-[#004455] py-3 px-4 w-full"
                            disabled>
                            Login
                        </button>
                    </div>
                </form>
                <div class="grid grid-cols-3 items-center content-center gap-x-2 w-full">
                    <div class="lg:visible invisible pl-5">
                        <hr class="border-1 border-[#026078]">
                    </div>
                    <div class="flex justify-center">
                        <h4 class="font-[Nunito] text-[#444b59] lg:text-lg text-sm whitespace-nowrap">or continue with
                        </h4>
                    </div>
                    <div class="lg:visible invisible pr-5">
                        <hr class="border-1 border-[#026078]">
                    </div>
                </div>
                <div class="flex flex-row items-center justify-center space-x-6 w-full">
                    <button type="button"
                        class="border-1 border-[#026078] rounded-sm cursor-pointer hover:bg-gray-500/20 lg:py-2 py-1 lg:px-6 px-3 h-full"><img
                            src="aset/google_logo.svg" alt="" class=""></button>
                    <button type="button"
                        class="border-1 border-[#026078] rounded-sm cursor-pointer hover:bg-gray-500/20 lg:py-2 py-1 lg:px-6 px-3 h-full"><img
                            src="aset/facebook_logo.svg" alt=""></button>
                </div>
            </div>
        </div>
        <div class="invisible lg:visible flex justify-end items-end bottom-0 right-0 fixed w-1/2">
            <div>
                <img src="aset/Side Image.svg" alt="" class="w-full">
            </div>
        </div>
    </div>
    <div id="successToast"
        class=" fixed top-5 left-1/2 -translate-x-1/2 bg-white border-3 border-[#026078] text-green-500 py-2 px-4 rounded-md shadow-lg"
        x-data="{ show: false }" x-cloak @show-toast-success.window="show = true; setTimeout(() => show = false, 3000)"
        x-transition:enter="transition ease-out duration-300 transform"
        x-transition:enter-start="opacity-0 -translate-y-10" x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-200 transform" x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0" x-show="show">
        Login Successful!
    </div>
    <div id="errorToast"
        class=" fixed top-5 left-1/2 -translate-x-1/2 bg-white border-3 border-[#026078] text-red-500 py-2 px-4 rounded-md shadow-lg"
        x-data="{ show: false }" x-cloak @show-toast-error.window="show = true; setTimeout(() => show = false, 3000)"
        x-transition:enter="transition ease-out duration-300 transform"
        x-transition:enter-start="opacity-0 -translate-y-10" x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-200 transform" x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0" x-show="show">
        Incorrect Email or Password!
    </div>


    <!-- External Script -->
    <script>
        const loginEmail = document.getElementById("loginEmail");
        const loginPassword = document.getElementById("loginPassword");
        const toggleLoginPassword = document.getElementById("toggleLoginPassword");
        const loginPasswordError = document.getElementById("loginPasswordError");
        const loginSubmit = document.getElementById("loginSubmit");

        function validateLoginForm() {
            let isValid = true;

            if (loginPassword.value.length < 6) {
                loginPasswordError.classList.remove("invisible");
                isValid = false;
            } else {
                loginPasswordError.classList.add("invisible");
            }

            if (loginEmail.value.trim() === "" || loginPassword.value.trim() === "") {
                isValid = false;
            }

            loginSubmit.disabled = !isValid;
            loginSubmit.classList.toggle("opacity-50", !isValid);
            loginSubmit.classList.toggle("cursor-not-allowed", !isValid);
        }

        loginEmail.addEventListener("input", validateLoginForm);
        loginPassword.addEventListener("input", validateLoginForm);

        toggleLoginPassword.addEventListener("click", () => {
            if (loginPassword.type === "password") {
                loginPassword.type = "text";
                toggleLoginPassword.style.opacity = "0.4";
            } else {
                loginPassword.type = "password";
                toggleLoginPassword.style.opacity = "1";
            }
        });

        const loginForm = document.getElementById("loginForm");
        const successToast = document.getElementById("successToast");
        const errorToast = document.getElementById("errorToast");

        loginForm.addEventListener("submit", (e) => {
            e.preventDefault();

            const emailValue = loginEmail.value.trim();
            const passwordValue = loginPassword.value.trim();

            // DIGANTI YA BANG
            if (emailValue === "dummy@dummy.com" && passwordValue === "dummyPw") {
                sessionStorage.setItem('loginStatus', 'success');

                setTimeout(() => {
                    window.location.href = "home.html"; 
                }, 100); 
            } else {e
                sessionStorage.setItem('loginStatus', 'error');

                setTimeout(() => {
                    window.location.reload(); 
                }, 100);
            }
        });

        document.addEventListener("DOMContentLoaded", () => {
            const loginStatus = sessionStorage.getItem('loginStatus');
            const successToast = document.getElementById("successToast");
            const errorToast = document.getElementById("errorToast");

            if (loginStatus === 'success') {
                window.dispatchEvent(new CustomEvent('show-toast-success'));
                sessionStorage.removeItem('loginStatus'); 
            } else if (loginStatus === 'error') {
                window.dispatchEvent(new CustomEvent('show-toast-error'));
                sessionStorage.removeItem('loginStatus'); 
            }
        });
    </script>
</body>

</html>